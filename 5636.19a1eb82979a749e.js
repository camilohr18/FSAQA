"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5636],{5636:(U,I,d)=>{d.r(I),d.d(I,{TareaInfoPageModule:()=>O});var p=d(177),m=d(4341),r=d(9465),h=d(4964),k=d(467),F=d(8195),e=d(3953),y=d(5066);function b(o,s){if(1&o){const n=e.RV6();e.j41(0,"ion-item")(1,"ion-button",13),e.bIt("click",function(){e.eBV(n);const t=e.XpG(2);return e.Njj(t.eliminateTask(t.task.id))}),e.j41(2,"b"),e.EFF(3,"Eliminar Tarea"),e.k0s()()()}}function N(o,s){if(1&o&&(e.j41(0,"ion-row")(1,"ion-col",14)(2,"ion-item")(3,"h3"),e.EFF(4,"Proyecto:"),e.k0s(),e.j41(5,"h2",2),e.EFF(6),e.k0s()()(),e.j41(7,"ion-col",14)(8,"ion-item")(9,"h3"),e.EFF(10,"Supervisor:"),e.k0s(),e.j41(11,"h2",2),e.EFF(12),e.k0s()()()()),2&o){const n=e.XpG(3);e.R7$(6),e.JRh(n.task.proyect.pName),e.R7$(6),e.JRh(n.task.proyect.supName)}}function j(o,s){if(1&o&&(e.j41(0,"div"),e.DNE(1,N,13,2,"ion-row",6),e.k0s()),2&o){const n=e.XpG(2);e.R7$(),e.Y8G("ngIf","none"!=n.task.proyect)}}function R(o,s){if(1&o){const n=e.RV6();e.j41(0,"div",18),e.bIt("click",function(t){e.eBV(n);const i=e.XpG().$implicit,c=e.XpG(3);return e.Njj(c.openImage(t,i,!1))}),e.k0s()}if(2&o){const n=e.XpG().$implicit;e.xc7("background-image","url("+n+")")}}function x(o,s){if(1&o&&(e.j41(0,"ion-col",16),e.DNE(1,R,1,2,"div",17),e.k0s()),2&o){const n=s.$implicit;e.R7$(),e.Y8G("ngIf",n&&""!=n)}}function P(o,s){if(1&o&&(e.j41(0,"ion-row"),e.DNE(1,x,2,1,"ion-col",15),e.k0s()),2&o){const n=e.XpG(2);e.R7$(),e.Y8G("ngForOf",n.task.img)}}function E(o,s){1&o&&(e.j41(0,"ion-item"),e.nrm(1,"ion-textarea",19),e.k0s())}function $(o,s){1&o&&e.nrm(0,"div")}function G(o,s){if(1&o&&(e.j41(0,"ion-item",7)(1,"ion-label")(2,"h4",20),e.EFF(3),e.k0s(),e.j41(4,"h2"),e.EFF(5),e.k0s(),e.j41(6,"ion-note",2),e.EFF(7),e.k0s()()()),2&o){const n=s.$implicit;e.R7$(3),e.JRh(n.cNote),e.R7$(2),e.SpI("",n.note," "),e.R7$(2),e.JRh(n.dNote)}}function C(o,s){if(1&o){const n=e.RV6();e.j41(0,"ion-button",21),e.bIt("click",function(){e.eBV(n);const t=e.XpG(2);return e.Njj(t.aceptTask())}),e.EFF(1," Aceptar Tarea "),e.k0s()}}function X(o,s){if(1&o){const n=e.RV6();e.j41(0,"ion-item")(1,"ion-button",21),e.bIt("click",function(){e.eBV(n);const t=e.XpG(2);return e.Njj(t.getNotes(!0))}),e.EFF(2," Agregar Notas "),e.k0s()()}}function M(o,s){if(1&o){const n=e.RV6();e.j41(0,"ion-button",22),e.bIt("click",function(){e.eBV(n);const t=e.XpG(2);return e.Njj(t.changeTaskStatus("rev"))}),e.j41(1,"b"),e.EFF(2,"Finalizar con revision"),e.k0s()()}}function D(o,s){if(1&o){const n=e.RV6();e.j41(0,"ion-button",23),e.bIt("click",function(){e.eBV(n);const t=e.XpG(2);return e.Njj(t.changeTaskStatus("done"))}),e.j41(1,"b"),e.EFF(2,"Finalizar sin revision"),e.k0s()()}}function S(o,s){if(1&o){const n=e.RV6();e.j41(0,"div")(1,"ion-list"),e.DNE(2,b,4,0,"ion-item",6),e.j41(3,"ion-item")(4,"h3"),e.EFF(5,"Tarea creada por:"),e.k0s(),e.j41(6,"h2",2)(7,"b"),e.EFF(8),e.k0s()()(),e.DNE(9,j,2,1,"div",6),e.j41(10,"ion-item")(11,"h3"),e.EFF(12,"Estatus:"),e.k0s(),e.j41(13,"h2",2)(14,"b"),e.EFF(15),e.nI1(16,"titlecase"),e.k0s()()(),e.j41(17,"ion-item")(18,"h3"),e.EFF(19,"Prioridad:"),e.k0s(),e.j41(20,"h2",2)(21,"b"),e.EFF(22),e.nI1(23,"titlecase"),e.k0s()()(),e.j41(24,"ion-item",7)(25,"h3"),e.EFF(26,"Descripcion de la tarea:"),e.k0s()(),e.j41(27,"ion-item")(28,"ion-textarea",8),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.task.desc,t)||(i.task.desc=t),e.Njj(t)}),e.k0s()(),e.DNE(29,P,2,1,"ion-row",6),e.j41(30,"ion-item",7)(31,"h3"),e.EFF(32,"Notas adicionales:"),e.k0s()(),e.DNE(33,E,2,0,"ion-item",6)(34,$,1,0,"div",6)(35,G,8,3,"ion-item",9)(36,C,2,0,"ion-button",10)(37,X,3,0,"ion-item",6)(38,M,3,0,"ion-button",11)(39,D,3,0,"ion-button",12),e.k0s()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("ngIf",n.creator),e.R7$(6),e.JRh(n.task.creatorName),e.R7$(),e.Y8G("ngIf",n.task.proyect),e.R7$(6),e.JRh(e.bMT(16,14,n.task.status)),e.R7$(7),e.JRh(e.bMT(23,16,n.task.priority)),e.R7$(6),e.R50("ngModel",n.task.desc),e.R7$(),e.Y8G("ngIf","No-Image"!=n.task.img),e.R7$(4),e.Y8G("ngIf",!n.task.notes),e.R7$(),e.Y8G("ngIf",n.task.notes),e.R7$(),e.Y8G("ngForOf",n.task.notes),e.R7$(),e.Y8G("ngIf","creada"===n.task.status),e.R7$(),e.Y8G("ngIf","creada"!=n.task.status),e.R7$(),e.Y8G("ngIf","creada"!=n.task.status&&"procesando"===n.task.status),e.R7$(),e.Y8G("ngIf","creada"!=n.task.status&&"procesando"===n.task.status||"revision"===n.task.status)}}const B=[{path:"",component:(()=>{var o;class s{constructor(a,t,i,c,g,l){this.activatedRoute=a,this.service=t,this.loadingCtrl=i,this.popoverCtrl=c,this.alertCtrl=g,this.router=l,this.loaded=!1,this.uId="5azWXrluqEh888FNJyVo9ag1Ld83",this.creator=!1,this.taskId=this.activatedRoute.snapshot.paramMap.get("id"),this.taskId&&this.getTaskInfo(),this.uId=localStorage.getItem("logged")}ngOnInit(){}presentLoading(){var a=this;return(0,k.A)(function*(){a.loading=yield a.loadingCtrl.create({message:"Cargando..."}),yield a.loading.present()})()}getTaskInfo(){this.presentLoading(),this.service.getTaskById(this.taskId).then(a=>{console.log(a),a&&a.forEach(t=>{if(t.proyect&&"none"!=t.proyect){let i=JSON.parse(t.proyect);t.proyect=i,this.service.getUserById(t.proyect.sId).then(c=>{t.proyect.supName=c[0].name})}if(t.notes){let i=JSON.parse(t.notes);t.notes=i}this.service.getUserById(t.cUid).then(i=>{if(t.creatorName=i[0].name,"No-Image"!=t.img){let c=JSON.parse(t.img);t.img=c}this.uId===t.cUid&&(this.creator=!0),this.task=t,this.loaded=!0,this.loading.dismiss()})})})}openImage(a,t,i){var c=this;return(0,k.A)(function*(){console.log(i);const g=yield c.popoverCtrl.create({component:F.n,cssClass:"my-custom-class",translucent:!1,componentProps:{mss:t,inf:i}});yield g.present();const{role:l}=yield g.onDidDismiss();console.log("onDidDismiss resolved with role",l)})()}changeTaskStatus(a,t){"rev"===a?this.getNotes(!0,"rev"):"done"===a&&this.getNotes(!0,a)}aceptTask(){let a;this.changeTaskStatus("procesando",a),a=this.getNotes(),a.status="procesando",this.updateTask(a)}getNotes(a,t){var i=this;return(0,k.A)(function*(){yield(yield i.alertCtrl.create({header:"Notas Adicionales",inputs:[{name:"paragraph",id:"paragraph",type:"textarea",placeholder:"Coloca aqui notas adicionales si tienes alguna"}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary"},{text:"Ok",handler:g=>{let l=i.getDate();i.service.getUserById(i.uId).then(v=>{let u,f={note:g.paragraph,dNote:l,cNote:v[0].name};if(a){let _=[{}];i.task.notes?(i.task.notes.push(f),console.log(i.task.notes),_=i.task.notes):(console.log(f),_[0]=f),u={notes:JSON.stringify(_)}}else{let _,T=[{}];""===f.note?(_="",u={status:"procesando",notes:JSON.stringify(_),dProcesing:l}):(T[0]=f,u={status:"procesando",notes:JSON.stringify(T),dProcesing:l})}"rev"===t?(u.dRev=l,u.status="revision"):"done"===t&&(u.dFinal=l,u.status="completada"),console.log(u),i.updateTask(u),("rev"===t||"done"===t)&&i.router.navigate(["/inicio"])})}}]})).present()})()}updateTask(a){this.service.updateTask(a,this.taskId).then(t=>{console.log(t),this.task.notes=JSON.parse(t.notes),this.task.status="procesando"})}getDate(){let a=new Date,t=a.getDate(),i=a.getMonth()+1,c=a.getFullYear(),g=a.getHours(),l=a.getMinutes();return i<10?console.log(`${t}-0${i}-${c}`):console.log(`${t}-${i}-${c}`),t+"/"+i+"/"+c+" "+g+":"+l}eliminateTask(a){this.service.deleteTaskById(a).then(t=>{console.log(t),this.notify(),this.router.navigateByUrl("/inicio")})}notify(){var a=this;return(0,k.A)(function*(){yield(yield a.alertCtrl.create({header:"Eliminaste la tarea de forma exitosa",buttons:[{text:"Ok"}]})).present()})()}getSupervisor(){return this.service.getUserById(this.task.proyect.sId).then(a=>a[0].name)}}return(o=s).\u0275fac=function(a){return new(a||o)(e.rXU(h.nX),e.rXU(y.u),e.rXU(r.Xi),e.rXU(r.IE),e.rXU(r.hG),e.rXU(h.Ix))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-tarea-info"]],decls:10,vars:2,consts:[[1,"ion-no-border"],["color","dark"],["slot","end"],["color","primary","menu","first"],["slot","start"],["color","primary","defaultHref","/"],[4,"ngIf"],["lines","none"],["rows","6","placeholder","modificar el header...",3,"ngModelChange","ngModel"],["lines","none",4,"ngFor","ngForOf"],["expand","block","shape","round",3,"click",4,"ngIf"],["color","warning","expand","block","shape","round",3,"click",4,"ngIf"],["color","success","expand","block","shape","round",3,"click",4,"ngIf"],["color","danger","expand","block","shape","round",3,"click"],["size","6"],["size","4",4,"ngFor","ngForOf"],["size","4"],["class","bgImg",3,"backgroundImage","click",4,"ngIf"],[1,"bgImg",3,"click"],["rows","6","placeholder","Aun no hay notas en la tarea","disabled","true"],[2,"background-color","var(--ion-color-primary)","display","inline","color","white","margin","10px","padding","0px 10px","border-radius","10px"],["expand","block","shape","round",3,"click"],["color","warning","expand","block","shape","round",3,"click"],["color","success","expand","block","shape","round",3,"click"]],template:function(a,t){1&a&&(e.j41(0,"ion-content")(1,"ion-header",0)(2,"ion-toolbar",1)(3,"ion-buttons",2),e.nrm(4,"ion-menu-button",3),e.k0s(),e.j41(5,"ion-buttons",4),e.nrm(6,"ion-back-button",5),e.k0s(),e.j41(7,"ion-title"),e.EFF(8),e.k0s()()(),e.DNE(9,S,40,18,"div",6),e.k0s()),2&a&&(e.R7$(8),e.SpI("Informacion de la tarea // Id: ",t.taskId,""),e.R7$(),e.Y8G("ngIf",t.loaded))},dependencies:[p.Sq,p.bT,m.BC,m.vS,r.Jm,r.QW,r.hU,r.W9,r.eU,r.uz,r.he,r.nf,r.MC,r.JI,r.ln,r.nc,r.BC,r.ai,r.Gw,r.el,p.PV]}),s})()}];let J=(()=>{var o;class s{}return(o=s).\u0275fac=function(a){return new(a||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[h.iI.forChild(B),h.iI]}),s})(),O=(()=>{var o;class s{}return(o=s).\u0275fac=function(a){return new(a||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[p.MD,m.YN,r.bv,J]}),s})()}}]);