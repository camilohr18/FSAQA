"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[726],{726:(M,f,d)=>{d.r(f),d.d(f,{TareaPageModule:()=>C});var h=d(177),p=d(4341),l=d(9465),m=d(4964),_=d(467),e=d(3953),j=d(5066),k=d(1445);function F(n,c){if(1&n&&(e.j41(0,"ion-select-option",35),e.EFF(1),e.k0s()),2&n){const r=c.$implicit;e.Y8G("value",r),e.R7$(),e.JRh(r.pName)}}function v(n,c){if(1&n){const r=e.RV6();e.j41(0,"ion-item")(1,"ion-label"),e.EFF(2,"Selecciona un proyecto (Opcional)"),e.k0s(),e.j41(3,"ion-select",32),e.mxI("ngModelChange",function(i){e.eBV(r);const a=e.XpG();return e.DH7(a.taskProject,i)||(a.taskProject=i),e.Njj(i)}),e.bIt("ionChange",function(i){e.eBV(r);const a=e.XpG();return e.Njj(a.getSupervisor(i))}),e.j41(4,"ion-select-option",33),e.EFF(5,"Sin projecto"),e.k0s(),e.DNE(6,F,2,2,"ion-select-option",34),e.k0s()()}if(2&n){const r=e.XpG();e.R7$(3),e.R50("ngModel",r.taskProject),e.R7$(3),e.Y8G("ngForOf",r.proyects)}}function T(n,c){if(1&n){const r=e.RV6();e.j41(0,"div",38)(1,"ion-button",39),e.bIt("click",function(){e.eBV(r);const i=e.XpG().$implicit,a=e.XpG();return e.Njj(a.eliminarImg(i))}),e.EFF(2," eliminar "),e.k0s()()}if(2&n){const r=e.XpG().$implicit;e.xc7("background-image","url("+r+")")}}function y(n,c){if(1&n&&(e.j41(0,"ion-col",36),e.DNE(1,T,3,2,"div",37),e.k0s()),2&n){const r=c.$implicit;e.R7$(),e.Y8G("ngIf",r&&""!=r)}}const P=[{path:"",component:(()=>{var n;class c{constructor(o,i,a,s,t){this.actionSheetCtrl=o,this.service=i,this.firestorage=a,this.alertCtrl=s,this.router=t,this.banner_to_upload="",this.files_uploaded=[],this.supEditable=!1}ngOnInit(){this.service.getProyects().then(o=>{this.proyects=o,console.log(o)})}checkInfoName(o){o.target.value&&(this.name_filled="success")}checkInfoPrior(o){o.target.value&&(this.prior_filled="success")}checkInfoDesc(o){o.target.value&&(this.desc_filled="success")}changeListener(o){this.files=o.target.files,this.loadPicture(this.files)}loadPicture(o){if(console.log("fle",o),this.banner_to_upload=[],0!==o.length&&null!=o[0].type.match(/image\/*/))if(this.banner_to_upload=o,this.banner_to_upload){console.log("ok");const a=o[0],s=this.firestorage.ref("task/"+a.name);s.put(a).then(u=>{console.log(u),s.getDownloadURL(),s.getDownloadURL().subscribe(g=>{console.log("download ur",g),this.coverImage=g,0===this.files_uploaded.length?this.files_uploaded[0]=this.coverImage:this.files_uploaded[this.files_uploaded.length]=this.coverImage},g=>{console.error("upload rejected",g)})})}else console.log("error")}crearTarea(){this.verificarCampos()}verificarCampos(){this.userName||(console.log("nombre incompleto"),this.name_filled="danger"),this.priority||(console.log("prioridad no seteada"),this.prior_filled="danger"),this.description||(console.log("No hay desc"),this.desc_filled="danger"),("danger"==this.name_filled||"danger"==this.prior_filled||"danger"==this.desc_filled)&&this.alertNotFilled(),this.service.getUserByAcrom(this.userName).then(o=>{if(o){let i;this.cUid=localStorage.getItem("logged"),this.aUid=o[0].uid;const a=this.service.makeid(15);if(i=0!=this.files_uploaded.length?JSON.stringify(this.files_uploaded):"No-Image",this.taskProject){"none"!=this.taskProject?(console.log(this.taskProject),this.taskProject=JSON.stringify(this.taskProject)):(this.supAcrom&&this.service.getUserByAcrom(this.supAcrom).then(t=>{this.taskProject={id:"none",pDesc:"No hay descripcion",pName:"No hay informacion",sId:t[0].uid,sName:t[0].name},this.taskProject=JSON.stringify(this.taskProject);const u={cUid:this.cUid,aUid:this.aUid,priority:this.priority,desc:this.description,img:i,status:"creada",id:a,dCreada:this.getDate(),proyect:this.taskProject};this.service.createTask(u,a).then(g=>{console.log(g),this.alertMss("Tarea creada exitosamente. Puedes revisar tus tareas creadas en el panel de inicio"),this.router.navigate(["/inicio"])})}),this.taskProject={id:"none",pDesc:"No hay descripcion",pName:"No hay informacion",sId:"No hay sId",sName:"None"},this.taskProject=JSON.stringify(this.taskProject));const s={cUid:this.cUid,aUid:this.aUid,priority:this.priority,desc:this.description,img:i,status:"creada",id:a,dCreada:this.getDate(),proyect:this.taskProject};console.log("esta es la tarea",s),this.service.createTask(s,a).then(t=>{console.log(t),t&&(this.alertMss("Tarea creada exitosamente. Puedes revisar tus tareas creadas en el panel de inicio"),this.router.navigate(["/inicio"]))}).catch(t=>{console.log(t),this.alertMss("Ha ocurrido un error en la creacion de la tarea. Intenta nuevamente. Si el error persiste por favor contacta al administrador "+t)})}else if(this.supAcrom)this.service.getUserByAcrom(this.supAcrom).then(s=>{this.taskProject={id:"none",pDesc:"No hay descripcion",pName:"No hay informacion",sId:s[0].uid,sName:s[0].name};const t={cUid:this.cUid,aUid:this.aUid,priority:this.priority,desc:this.description,img:i,status:"creada",id:a,dCreada:this.getDate(),proyect:JSON.stringify(this.taskProject)};this.service.createTask(t,a).then(u=>{console.log(u),this.alertMss("Tarea creada exitosamente. Puedes revisar tus tareas creadas en el panel de inicio"),this.router.navigate(["/inicio"])})});else{this.taskProject={id:"none",pDesc:"No hay descripcion",pName:"No hay informacion",sId:"No hay sId",sName:"None"};const s={cUid:this.cUid,aUid:this.aUid,priority:this.priority,desc:this.description,img:i,status:"creada",id:a,dCreada:this.getDate(),proyect:JSON.stringify(this.taskProject)};this.service.createTask(s,a).then(t=>{console.log(t),this.alertMss("Tarea creada exitosamente. Puedes revisar tus tareas creadas en el panel de inicio"),this.router.navigate(["/inicio"])})}}}).catch(o=>{console.log(o),this.alertMss("Ha ocurrido un error en la creacion de la tarea. Intenta nuevamente. Si el error persiste por favor contacta al administrador "+o)})}alertNotFilled(){var o=this;return(0,_.A)(function*(){const i=yield o.alertCtrl.create({cssClass:"my-custom-class",header:"!Atencion!",message:"Debes llenar todos los campos en rojo para que la tarea sea creada apropiadamente.",buttons:["OK"]});yield i.present(),yield i.onDidDismiss()})()}alertMss(o){var i=this;return(0,_.A)(function*(){const a=yield i.alertCtrl.create({header:"!Atencion!",message:o,buttons:["OK"]});yield a.present(),yield a.onDidDismiss()})()}eliminarImg(o){console.log(o),this.files_uploaded=this.files_uploaded.filter(i=>i!=o),console.log(this.files_uploaded)}getDate(){let o=new Date,i=o.getDate(),a=o.getMonth()+1,s=o.getFullYear(),t=o.getHours(),u=o.getMinutes();return a<10?console.log(`${i}-0${a}-${s}`):console.log(`${i}-${a}-${s}`),i+"/"+a+"/"+s+" "+t+":"+u}getSupervisor(o){"none"!==o.detail.value?this.service.getUserById(o.detail.value.sId).then(i=>{this.supAcrom=i[0].acrom,this.supEditable=!0}):this.supEditable=!1}}return(n=c).\u0275fac=function(o){return new(o||n)(e.rXU(l.GD),e.rXU(j.u),e.rXU(k.ap),e.rXU(l.hG),e.rXU(m.Ix))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-tarea"]],decls:77,vars:11,consts:[["file",""],[1,"ion-no-border"],["color","dark"],["slot","start"],["color","primary","menu","first"],[1,"padding-extra"],[4,"ngIf"],[3,"color"],["interface","popover","placeholder","Seleccione a la persona que supervisa el proyecto (Opcional)",3,"ngModelChange","disabled","ngModel"],["value","dmenes"],["value","cramos"],["value","sardil"],["value","aquin"],["value","jquin"],["interface","popover","placeholder","Seleccione a la persona que lo realizara",3,"ngModelChange","ionChange","ngModel"],["value","eateh"],["value","ndegra"],["value","josman"],["value","drodri"],["value","dcaice"],["value","lcuerv"],["interface","popover","value","low",3,"ngModelChange","ionChange","ngModel"],["value","low"],["value","medium"],["value","high"],["value","emerg"],["position","floating"],["rows","6","placeholder","modificar el header...",3,"ngModelChange","ionChange","ngModel"],["expand","block","color","success","shape","round",3,"click"],["type","file","id","file-input","accept","image/png, image/jpeg",1,"ion-hide",3,"change"],["size","4",4,"ngFor","ngForOf"],["expand","block",3,"click"],["multiple","false","placeholder","Selecciona Projecto",3,"ngModelChange","ionChange","ngModel"],["value","none"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["size","4"],["class","bgImg",3,"backgroundImage",4,"ngIf"],[1,"bgImg"],["expand","block","shape","round",3,"click"]],template:function(o,i){if(1&o){const a=e.RV6();e.j41(0,"ion-content")(1,"ion-header",1)(2,"ion-toolbar",2)(3,"ion-buttons",3),e.nrm(4,"ion-menu-button",4),e.k0s(),e.j41(5,"ion-title"),e.EFF(6,"Crear Tareas"),e.k0s()()(),e.j41(7,"ion-card",5),e.DNE(8,v,7,2,"ion-item",6),e.j41(9,"ion-item",7)(10,"ion-label"),e.EFF(11,"Selecciona un Supervisor (Opcional)"),e.k0s(),e.j41(12,"ion-select",8),e.mxI("ngModelChange",function(t){return e.eBV(a),e.DH7(i.supAcrom,t)||(i.supAcrom=t),e.Njj(t)}),e.j41(13,"ion-select-option",9),e.EFF(14,"Danna Meneses"),e.k0s(),e.j41(15,"ion-select-option",10),e.EFF(16,"Camilo Ramos"),e.k0s(),e.j41(17,"ion-select-option",11),e.EFF(18,"Sebastian Ardila"),e.k0s(),e.j41(19,"ion-select-option",12),e.EFF(20,"Alfonso Qui\xf1onez"),e.k0s(),e.j41(21,"ion-select-option",13),e.EFF(22,"Julian Qui\xf1onez"),e.k0s()()(),e.j41(23,"ion-item",7)(24,"ion-label"),e.EFF(25,"A quien asignaras"),e.k0s(),e.j41(26,"ion-select",14),e.mxI("ngModelChange",function(t){return e.eBV(a),e.DH7(i.userName,t)||(i.userName=t),e.Njj(t)}),e.bIt("ionChange",function(t){return e.eBV(a),e.Njj(i.checkInfoName(t))}),e.j41(27,"ion-select-option",15),e.EFF(28,"Esteban Atehortua"),e.k0s(),e.j41(29,"ion-select-option",16),e.EFF(30,"Nathalia DeGracia"),e.k0s(),e.j41(31,"ion-select-option",17),e.EFF(32,"Johan Osman"),e.k0s(),e.j41(33,"ion-select-option",18),e.EFF(34,"Daniel Rodriguez"),e.k0s(),e.j41(35,"ion-select-option",9),e.EFF(36,"Danna Meneses"),e.k0s(),e.j41(37,"ion-select-option",19),e.EFF(38,"Daniel Caicedo"),e.k0s(),e.j41(39,"ion-select-option",10),e.EFF(40,"Camilo Ramos"),e.k0s(),e.j41(41,"ion-select-option",11),e.EFF(42,"Sebastian Ardila"),e.k0s(),e.j41(43,"ion-select-option",20),e.EFF(44,"Laura Cuervo"),e.k0s(),e.j41(45,"ion-select-option",12),e.EFF(46,"Alfonso Qui\xf1onez"),e.k0s(),e.j41(47,"ion-select-option",13),e.EFF(48,"Julian Qui\xf1onez"),e.k0s()()(),e.j41(49,"ion-item",7)(50,"ion-label"),e.EFF(51,"Prioridad"),e.k0s(),e.j41(52,"ion-select",21),e.mxI("ngModelChange",function(t){return e.eBV(a),e.DH7(i.priority,t)||(i.priority=t),e.Njj(t)}),e.bIt("ionChange",function(t){return e.eBV(a),e.Njj(i.checkInfoPrior(t))}),e.j41(53,"ion-select-option",22),e.EFF(54,"Baja"),e.k0s(),e.j41(55,"ion-select-option",23),e.EFF(56,"Media"),e.k0s(),e.j41(57,"ion-select-option",24),e.EFF(58,"Alta"),e.k0s(),e.j41(59,"ion-select-option",25),e.EFF(60,"Emergencia"),e.k0s()()(),e.j41(61,"ion-item",7)(62,"ion-label",26),e.EFF(63,"Descripcion de la tarea"),e.k0s(),e.nrm(64,"br"),e.j41(65,"ion-textarea",27),e.mxI("ngModelChange",function(t){return e.eBV(a),e.DH7(i.description,t)||(i.description=t),e.Njj(t)}),e.bIt("ionChange",function(t){return e.eBV(a),e.Njj(i.checkInfoDesc(t))}),e.k0s()(),e.j41(66,"ion-item")(67,"ion-label"),e.EFF(68,"Agrega soportes o foto"),e.k0s(),e.j41(69,"ion-button",28),e.bIt("click",function(){e.eBV(a);const t=e.sdS(72);return e.Njj(t.click())}),e.EFF(70," Agregar "),e.k0s(),e.j41(71,"input",29,0),e.bIt("change",function(t){return e.eBV(a),e.Njj(i.changeListener(t))}),e.k0s()(),e.j41(73,"ion-row"),e.DNE(74,y,2,1,"ion-col",30),e.k0s(),e.j41(75,"ion-button",31),e.bIt("click",function(){return e.eBV(a),e.Njj(i.crearTarea())}),e.EFF(76," Crear Tarea "),e.k0s()()()}2&o&&(e.R7$(8),e.Y8G("ngIf",null!=i.proyects),e.R7$(),e.Y8G("color",i.sup_filled),e.R7$(3),e.Y8G("disabled",i.supEditable),e.R50("ngModel",i.supAcrom),e.R7$(11),e.Y8G("color",i.name_filled),e.R7$(3),e.R50("ngModel",i.userName),e.R7$(23),e.Y8G("color",i.prior_filled),e.R7$(3),e.R50("ngModel",i.priority),e.R7$(9),e.Y8G("color",i.desc_filled),e.R7$(4),e.R50("ngModel",i.description),e.R7$(9),e.Y8G("ngForOf",i.files_uploaded))},dependencies:[h.Sq,h.bT,p.BC,p.vS,l.Jm,l.QW,l.b_,l.hU,l.W9,l.eU,l.uz,l.he,l.MC,l.ln,l.Nm,l.Ip,l.nc,l.BC,l.ai,l.Je,l.Gw]}),c})()}];let N=(()=>{var n;class c{}return(n=c).\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[m.iI.forChild(P),m.iI]}),c})(),C=(()=>{var n;class c{}return(n=c).\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[h.MD,p.YN,l.bv,N]}),c})()}}]);